apiVersion: shulkermc.io/v1alpha1
kind: MinecraftCluster
metadata:
  name: test
spec: {}

---
apiVersion: shulkermc.io/v1alpha1
kind: ProxyDeployment
metadata:
  name: main
spec:
  minecraftClusterRef:
    name: test
  version:
    channel: Waterfall
    name: latest
  replicas: 1
  service:
    enabled: true
    type: NodePort
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 10
          preference:
            matchExpressions:
              - key: cloud.google.com/gke-preemptible
                operator: In
                values:
                  - 'true'

---
apiVersion: shulkermc.io/v1alpha1
kind: MinecraftServer
metadata:
  name: hub
spec:
  minecraftClusterRef:
    name: test
  version:
    channel: Spigot
    name: 1.18.1
  operators:
    - IamBlueSlime
  whitelistedPlayers:
    - IamBlueSlime
  world:
    url: https://i.jeremylvln.fr/shulker/hub.tar.gz
    disableNether: true
    disableEnd: true
  rcon:
    enabled: true
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 10
          preference:
            matchExpressions:
              - key: cloud.google.com/gke-preemptible
                operator: In
                values:
                  - 'true'
